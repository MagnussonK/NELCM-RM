name: DEBUG - Find ODBC Driver Paths

on:
  push:
    branches:
      - main

jobs:
  find-files:
    runs-on: ubuntu-latest
    
    steps:
      - name: Install MS ODBC Driver for SQL Server
        run: |
          sudo apt-get update
          sudo apt-get install -y curl gnupg
          curl -sSL https://packages.microsoft.com/keys/microsoft.asc | sudo gpg --batch --yes --dearmor -o /usr/share/keyrings/microsoft-prod.gpg
          echo "deb [arch=amd64 signed-by=/usr/share/keyrings/microsoft-prod.gpg] https://packages.microsoft.com/ubuntu/$(lsb_release -rs)/prod $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/mssql-release.list
          sudo apt-get update
          sudo ACCEPT_EULA=Y apt-get install -y msodbcsql18 unixodbc-dev

      - name: Locate the critical library files
        run: |
          echo "--- Location of libmsodbcsql-18.so ---"
          find / -name "libmsodbcsql-18.so" 2>/dev/null
          
          echo "--- Location of libodbc.so.2 ---"
          find / -name "libodbc.so.2" 2>/dev/null
          
          echo "--- Location of libodbcinst.so.2 ---"
          find / -name "libodbcinst.so.2" 2>/dev/null
          
          echo "--- Location of libltdl.so.7 ---"
          find / -name "libltdl.so.7" 2>/dev/null